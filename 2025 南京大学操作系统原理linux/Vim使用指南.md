> Vim 是一款功能强大但学习曲线稍显陡峭的文本编辑器。一旦掌握，它能极大提升文本处理效率。我会为你梳理核心概念、基础操作和进阶技巧，助你平稳起步。

# 🚀 Vim 编辑器入门与进阶指南

## ✨ 核心概念：模式编辑

Vim 的核心在于其**模式编辑**思想。这与大多数“即输即得”的编辑器不同，也是它强大效率的源泉。你首先需要理解 Vim 的几种基本模式：

- **普通模式 (Normal Mode)**：这是 Vim 的**指挥中心**。启动 Vim 后默认进入此模式。在此模式下，你可以高效地移动光标、复制、粘贴、删除文本或执行其他命令，**而不是直接输入文字**。几乎所有高效的编辑操作都从这里开始。
- **插入模式 (Insert Mode)**：这是你**输入文本**的模式。在这个模式下，Vim 的行为更像你熟悉的其他编辑器。
- **可视模式 (Visual Mode)**：用于**选择文本**。你可以选择字符、行或块，然后对选中的文本进行操作（复制、删除、改变大小写等）。
- **命令行模式 (Command-line Mode)**：用于执行**更复杂的命令**，例如保存文件、退出编辑器、搜索替换、配置设置等。

## 🛠️ 基础操作与高频快捷键

### 1. 启动、保存与退出

这是你操作文件的起点和终点。

| 命令              | 说明                                   |
| :---------------- | :------------------------------------- |
| `vim filename`  | 打开或新建文件                         |
| `:w`            | 保存文件                               |
| `:q`            | 退出 Vim                               |
| `:wq` 或 `:x` | 保存并退出                             |
| `:q!`           | **强制退出，不保存修改**（常用） |

### 2. 模式切换（核心操作）

这是你必须形成肌肉记忆的操作。

| 当前模式           | 操作              | 进入模式                 |
| :----------------- | :----------------: | :----------------------- |
| 普通模式           | `i`             | 插入模式（在光标前）     |
| 普通模式           | `I`             | 插入模式（在行首）       |
| 普通模式           | `a`             | 插入模式（在光标后）     |
| 普通模式           | `A`             | 插入模式（在行尾）       |
| 普通模式           | `o`             | 插入模式（在下方新建行） |
| 普通模式           | `O`             | 插入模式（在上方新建行） |
| 普通模式           | `v`             | 可视模式（字符选择）     |
| 普通模式           | `V`             | 可视模式（行选择）       |
| 普通模式           | `:`             | 命令行模式               |
| **任何模式** | **`Esc`** | **返回普通模式**   |

### 3. 光标的移动（普通模式下）

在 Vim 中，你的双手应尽量保持在键盘的主行区，远离方向键。

- **基本移动**：`h` (左), `j` (下), `k` (上), `l` (右)。
- **单词移动**：`w` (下一个词首), `b` (上一个词首), `e` (当前或下一个词尾), `ge` (上一个词尾)。
- **行内跳跃**：`0` (行首), `^` (行首非空白字符), `$` (行尾)。
- **文档跳跃**：`gg` (文件开头), `G` (文件末尾), `:{行号}` 或 `{行号}G` (跳转到指定行，如 `:10` 或 `10G`)。

- f{char}：光标跳到下个 `{char}`所在位置。
- F{char}：光标跳到上个 `{char}`所在位置。
- t{char}：光标跳到下个 `{char}` 的前一个字符的位置。
- T{char}：光标跳到上个 `{char}` 的后一个字符的位置。
- ; ：重复上一次 f, t, F, T 命令。
- , ：反向重复上一次 f, t, F, T 命令。

### 4. 基础的编辑操作（普通模式下）

Vim 的编辑命令通常遵循 `[次数][命令][移动]` 的语法，非常强大。

| 命令         | 说明                                                   |
| :----------- | :----------------------------------------------------- |
| `x`        | 删除光标下的字符                                       |
| `dd`       | **删除（剪切）当前行**                           |
| `yy`       | **复制当前行**                                   |
| `p`        | 在光标后粘贴                                           |
| `P`        | 在光标前粘贴                                           |
| `u`        | **撤销**                                         |
| `Ctrl + r` | **重做**（撤销的撤销）                           |
| `cw`       | **删除从光标处到词尾并进入插入模式**（超级常用） |
| `r`        | 替换当前字符（之后输入一个新字符即可）                 |

### 5. 搜索与替换

快速定位和批量修改文本。

- **搜索**：在普通模式下，输入 `/关键词` 然后按回车向前搜索。按 `n` 跳转到下一个匹配项，`N` 跳转到上一个。
- **替换**：
  - `:%s/old/new/g` - **全局**将所有的 `old` 替换为 `new`。
  - `:%s/old/new/gc` - 全局替换，但每次替换前**确认**。
  - `:s/old/new/g` - 仅替换**当前行**的匹配项。

## ⚡ 效率进阶技巧

当你熟悉基础后，这些技巧会让你的编辑速度飞起。

### 1. 数字与命令的结合

许多命令前面可以加数字，表示重复执行。

- `3dd` - 删除接下来的 3 行。
- `5yy` - 复制接下来的 5 行。
- `2cw` - 删除接下来的 2 个单词并进入插入模式。

### 2. 宏录制：自动化重复操作

宏能录制一系列操作，然后重复播放，非常适合批量处理。

1. **开始录制**：在普通模式下，按 `q` 后按一个寄存器字母（如 `a`）开始录制到寄存器 `a`。
2. **执行操作**：进行你的编辑操作（移动、修改、删除等）。
3. **停止录制**：按 `q` 结束录制。
4. **播放宏**：按 `@a` 播放录制在寄存器 `a` 中的宏。
5. **重复播放**：例如 `5@a` 会重复该宏 5 次。

### 3. 分屏与标签页

**分屏**：

- `:sp`（或 `:split`）**水平分割**当前窗口。
- `:vsp`（或 `:vsplit`）**垂直分割**当前窗口。
- `Ctrl + w` 然后按 `h/j/k/l` 或方向键在分屏间**切换焦点**。

**标签页**：

- `:tabnew [文件名]` - 在新标签页中打开文件。
- `gt` - 切换到下一个标签页。
- `gT` - 切换到上一个标签页。

## 🔧 个性化配置 (.vimrc)

Vim 的强大在于高度可定制性。在你的用户主目录（`~`）下创建一个名为 `.vimrc` 的文件，即可添加配置。

以下是几个极其推荐的基础配置：

```vim
" 显示行号
set number

" 高亮当前行
set cursorline

" 启用语法高亮
syntax on

" 设置 Tab 键和缩进为 4 个空格（对写代码和规范笔记非常友好）
set tabstop=4
set shiftwidth=4
set expandtab " 将 Tab 自动转换为空格

" 在底部状态栏显示当前模式
set showmode

" 高亮搜索结果
set hlsearch

" 设置忽略大小写搜索，除非搜索模式包含大写
set ignorecase
set smartcase
```

添加配置后，重启 Vim 或直接在 Vim 中执行 `:source ~/.vimrc` 即可生效。

## 📝 针对记笔记和代码的实践建议

- **记笔记**：

  - 使用 `o` 快速在新行开始书写。
  - 使用 `## 标题` 这样的 Markdown 语法，并配置 Vim 支持 Markdown 高亮（通常内置）。
  - 使用 `zz`（在普通模式下）将当前行滚动到屏幕中央，保持阅读焦点。
- **写代码**：

  - 熟练使用 `%` 键在配对的括号（如 `(), [], {}`）间跳转。
  - `gg=G` 命令可以**自动格式化整个文件的缩进**。
  - 使用 `Ctrl + n` 或 `Ctrl + p` 在插入模式下进行**单词补全**。

## 🧭 学习路径与练习方法

1. **内置教程**：在终端中输入 `vimtutor` 并完成它！这是**最好的入门方式**，大约只需 30 分钟。
2. **刻意练习**：
   - **强制自己**在日常所有文本编辑中使用 Vim。
   - 先熟练**移动**（`h/j/k/l`, `w`, `b`, `$`, `0`, `gg`, `G`）。
   - 再熟练**编辑**（`i`, `a`, `o`, `dd`, `yy`, `p`, `u`）。
   - 遇到重复性操作，思考能否用**数字**或**宏**解决。
3. **查阅帮助**：Vim 拥有无与伦比的内置帮助系统。遇到不熟悉的命令，在普通模式下输入 `:help {命令}` 即可查阅（例如 `:help w`，`:help dd`）。

> Vim 的学习过程就像学习一件乐器或一门运动，初期会感到别扭，但一旦肌肉记忆形成，你就会体验到那种**行云流水、所思即所得**的编辑快感。坚持下去，它一定会成为你的生产力利器。

希望这份指南能帮助你顺利开启 Vim 之旅！
